<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
<title>DASHBOARD</title>

<style>
  
.categories {
  position: relative;
  display: inline-block;
  z-index: 1999; /* ensure above everything else */
}

.cat-btn {
  background: #0b1220;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.3s ease;
}

.cat-btn:hover {
  background: #e68a00;
}

/* Main dropdown */
.cat-menu {
  position: absolute;
  top: calc(100% - 3px); /* overlap slightly to avoid hover gap */
  left: 0;
  background: #1a1a1a;
  min-width: 280px;
  border-radius: 8px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
  padding: 0.5rem 0;
  z-index: 3000;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: opacity 0.25s ease, transform 0.25s ease, visibility 0.25s ease;
  pointer-events: none;
}

/* Visible when active */
.categories.show .cat-menu {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  pointer-events: auto;
}

/* Hover buffer zone (prevents flicker between button & menu) */
.cat-menu::before {
  content: "";
  position: absolute;
  top: -8px;
  left: 0;
  width: 100%;
  height: 8px;
  background: transparent;
}

/* Main categories */
.main-cat {
  list-style: none;
  margin: 0;
  padding: 0;
}

.cat-item {
  position: relative;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.cat-item > a {
  display: block;
  padding: 12px 16px;
  color: #fff;
  text-decoration: none;
  font-weight: 500;
  transition: background 0.25s ease;
}

.cat-item > a:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #7dd3fc;
}

/* Submenu (2nd level) */
.sub-cat {
  position: absolute;
  top: 0;
  left: 100%;
  background: rgba(15, 22, 35, 0.98);
  min-width: 250px;
  border-radius: 0 10px 10px 0;
  box-shadow: 5px 8px 15px rgba(0, 0, 0, 0.3);
  list-style: none;
  padding: 8px 0;
  opacity: 0;
  visibility: hidden;
  transform: translateX(-15px);
  transition: all 0.25s ease;
}

.cat-item:hover > .sub-cat {
  visibility: visible;
  opacity: 1;
  transform: translateX(0);
}

/* Nested (3rd level) */
.nested {
  position: absolute;
  top: 0;
  left: 100%;
  background: rgba(10, 15, 25, 0.95);
  min-width: 220px;
  border-radius: 0 10px 10px 0;
  opacity: 0;
  visibility: hidden;
  transform: translateX(-15px);
  transition: all 0.25s ease;
}

.sub-cat li:hover > .nested {
  opacity: 1;
  visibility: visible;
  transform: translateX(0);
}

/* Submenu links */
.sub-cat li a,
.nested li a {
  display: block;
  padding: 8px 14px;
  color: #b6c8de;
  text-decoration: none;
  font-size: 14px;
  transition: background 0.25s ease, color 0.25s ease;
}

.sub-cat li a:hover,
.nested li a:hover {
  background: rgba(255, 255, 255, 0.06);
  color: #7dd3fc;
}
.searchbar-container {
  display: flex;
  align-items: center;
  gap: 10px;
  background: #111827;
  border: 1px solid #2c2f36;
  border-radius: 10px;
  padding: 5px 10px;
  width: 400px;
}

#productSearch {
  flex: 1;
  background: transparent;
  border: none;
  color: #fff;
  padding: 8px;
  font-size: 1rem;
  outline: none;
}

.searchbutton {
  background: #e68a00;
  border: none;
  color: white;
  font-weight: 600;
  border-radius: 8px;
  padding: 8px 14px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.searchbutton:hover {
  background: #ff9900;
}



.dashboard {
  display: flex;
  flex-direction: column;
  background: white;
  color: white;
  min-height: 100vh;
  justify-content: left;
}

/* Makes inner content side by side */
.dashboard-container {
  display: flex;
  flex-direction: row; /* side-by-side layout */
  align-items: flex-start;
  justify-content: flex-start;
  width: 100%;
  height: 100%;
  position: relative;   
  margin-top: 70px;        /* this makes .filter-sidebar absolute within it */
}
/* Sidebar should hug the left edge */
.filter-sidebar {
  position: absolute;         /* anchors it relative to parent */
  top: 0;                     /* stick to top */
  left: 0;                    /* stick to left */
  width: 500px;
  background: #0b1220;
  border-right: 1px solid #1f2937;
  padding: 20px;
  height:100vh ; /* full height minus top nav */
  overflow-y: auto;
  z-index: 10;                /* ensure it stays above content */
}
/* The rest of your page content */
.dashboard-content {
  flex: 1;
  padding: 30px;
  background: #f9fafb;
  color: #000;
  height: 100vh;
  overflow-y: auto;
}

.dashboard-content h2,
.dashboard-content p {
  text-align: center;
  margin: 0 auto 10px;
  color: #222;
}

.dashboard-content h2 {
  font-size: 1.8rem;
  font-weight: bold;
}

.dashboard-content p {
  font-size: 1rem;
  opacity: 0.8;
}

 


/* === GLOBAL LAYOUT === */
body {
  margin: 0;
  display: flex;
  flex-direction: column;
  background: #f9fafb;
  color: #111;
}

/* === TOP NAV BAR === */
.top-bar {
  background: #0b1220; /* same as sidebar */
  color: white;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 2rem;
  border-bottom: 1px solid #1f2937;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 20;
}

/* === DASHBOARD BODY (grid layout under the navbar) === */
.dashboard-body {
  display: flex;
  flex-direction: column;
  grid-template-columns: 150px 1fr; /* sidebar + main */
  gap: 10px;
  padding-top: 70px; /* height of navbar */
  min-height: 100vh;
}

/* === FILTER SIDEBAR === */


.product-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}

/* === PRODUCT GRID PERFECT FIT === */
#productContainer {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(215px, 1fr)); /* üëà magic line */
  gap: 0.5rem;
  justify-items: center; /* centers each card neatly */
  align-items: start;
  width: 100%;
  padding: 20px 0;
}

/* === PRODUCT CARD STYLING (if not defined yet) === */
.product-card {
  background: white;
  border-radius: 12px;
  padding: 15px;
  width: 250px; /* fixed width so they line up nicely */
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  color: white;
  transition: transform 0.2s ease;
}

.product-card:hover {
  transform: translateY(-5px);
}

/* === FILTER DROPDOWN CONTAINER === */
/* === FILTER DROPDOWN CONTAINER === */
.filter-bar {
  position: fixed;
  top: 70px; /* just below the topbar */
  left: 0;
  width: 100%;
  background: #0b1220;
  color: white;
  padding: 0 20px; /* start closed, no padding until opened */
  border-bottom: 1px solid #1f2937;
  display: flex;
  flex-direction: column; /* üëà makes it drop vertically */
  gap: 1rem;
  justify-content: flex-start;
  align-items: flex-start; /* keep contents aligned to the left */
  z-index: 40;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);

  /* transition magic */
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transform: translateY(-10px);
  transition: max-height 0.35s ease, opacity 0.35s ease, transform 0.35s ease, padding 0.3s ease;
}

/* === WHEN FILTER IS ACTIVE === */
.filter-bar.active {
  padding: 20px; /* expands down smoothly */
  max-height: 400px; /* vertical reveal height */
  opacity: 1;
  transform: translateY(0);
}

/* === FILTER GROUPS (stack neatly, not scattered) === */
.filter-group {
  display: flex;
  flex-direction: row; /* üëà horizontal grouping for labels and inputs */
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  width: 100%;
}

.filter-group label {
  font-size: 0.85rem;
  color: #d1d5db;
  min-width: 90px;
  text-align: right;
}

.filter-group input,
.filter-group select {
  background: #111827;
  color: white;
  border: 1px solid #374151;
  border-radius: 6px;
  padding: 6px 8px;
  font-size: 0.9rem;
  min-width: 160px;
}

/* === FILTER BUTTON === */
.filter-btn {
  align-self: flex-start;
  background: #e68a00;
  border: none;
  color: white;
  padding: 8px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.3s ease;
  margin-top: 8px;
}
.filter-btn:hover {
  background: #ff9900;
}

/* === SCROLL BEHAVIOR (if too many filters) === */
.filter-bar.active {
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: #555 #0b1220;
}
.filter-bar.active::-webkit-scrollbar {
  width: 6px;
}
.filter-bar.active::-webkit-scrollbar-thumb {
  background-color: #4b5563;
  border-radius: 8px;
}

/*modal css code */
/* === MODAL OVERLAY === */
.modal-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(204, 204, 204, 0.9);
  backdrop-filter: blur(8px);
  justify-content: center;
  align-items: flex-start;
  z-index: 2000;
  overflow-y: auto;
  padding: 50px 10px;
  transition: opacity 0.3s ease;
  opacity: 0;
  pointer-events: none;
}

.modal-overlay[style*="display: flex"] {
  opacity: 1;
  pointer-events: auto;
}

/* === MODAL CONTENT === */
.modal-content {
  background: rgba(255, 255, 255, 0.6);
  border-radius: 4px;
  width: 92%;
  max-width: 850px;
  color: red;
  text-align: center;
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 0 35px rgba(0, 0, 0, 0.55);
  margin: 0 auto;
  animation: fadeIn 0.3s ease;
  padding-bottom: 20px;
}

/* === CLOSE BUTTON === */
.close-btn {
  position: sticky;
  top: 15px;
  right: 15px;
  float: right;
  background: none;       /* remove square background */
  border: none;           /* remove default border */
  color: white;
  font-size: 1.6rem;      /* make the X visible */
  cursor: pointer;
  line-height: 1;
  text-align: center;
  padding: 0;             /* no padding space */
  z-index: 1000;          /* make sure it‚Äôs on top */
  transition: color 0.3s ease, transform 0.2s ease;
}

.close-btn:hover {
  color: red;
  transform: scale(1.1);
}


.close-btn:hover {
  color:red;
  transform: scale(1.05);
}

/* === HERO PRODUCT SECTION === */
.hero-card {
  width: 100%;
  height: 450px; /* Adjust to your preference */
  border-radius: 18px;
  overflow: hidden;
  position: relative;
}

/* Image fills top area perfectly */
.hero-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;  /* this fills the ENTIRE area */
  display: block;
}


/* Center and brighten text under image */
.hero-card .card-content {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background:transparent;
  padding: 18px;
  color: white;
  text-align: center;

  backdrop-filter: blur(4px);
}

  
/* Title and subtitle styling */
.hero-card .card-content h2,
.hero-card .card-content h3
 {
  color: #ffcc00;
  margin-bottom: 8px;
  font-weight: 700;
  text-transform: uppercase;
}
.hero-card .card-content p{
  color: white;
  margin-bottom: 8px;
  font-weight: 500;
  text-transform: uppercase;
}

/* === CONTACT INFO BOX === */
.contact-info {
  background: rgba(255, 255, 255, 0.12);
  border-radius: 10px;
  padding: 18px;
  margin-top: 20px;
  text-align: center;
  color: #7e7c7c; /* brighter contrast */
  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.25);
}


.contact-info h3 {
  color: #ffd700;
  font-size: 1.25rem;
  margin-bottom: 10px;
}

.contact-info p {
  margin: 6px 0;
  font-size: 0.95rem;
  color: black;
}

/* === RELATED PRODUCTS GRID === */
.modal-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-top: 25px;
  padding-bottom: 15px;
}

.modal-grid .product-card {
  width: 180px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  overflow: hidden;
  color: #fff;
  transition: transform 0.3s ease, background 0.3s ease;
  text-align: center;
}

.modal-grid .product-card img {
  width: 100%;
  height: 120px;
  object-fit: cover;
}

.modal-grid .product-card .card-content {
  padding: 10px;
  font-size: 0.9rem;
  line-height: 1.3;
  color: #f1f1f1;
}

.modal-grid .product-card:hover {
  transform: scale(1.06);
  background: rgba(255, 255, 255, 0.15);
}

/* === Scrollbar Styling === */
.modal-content::-webkit-scrollbar {
  width: 6px;
}

.modal-content::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.25);
  border-radius: 3px;
}

/* === Animation === */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(25px); }
  to { opacity: 1; transform: translateY(0); }
}
/* Container that holds ALL the same-category cards */
.hero-preview {
  width: 100%;
  padding: 12px;
  box-sizing: border-box;
}

/* Each card inside the hero preview */
.hero-preview .modal-other-card {

  border-radius: 14px;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
  cursor: pointer;
}

/* Hover effects */
.hero-preview .modal-other-card:hover {
  transform: scale(1.05);
  box-shadow: 0px 4px 18px rgba(0,0,0,0.4);
}



</style>
</head>
<body>
<!-- Navbar -->
  <header class="navbar">
     <div class="logo" style="display:flex; align-items:center; gap:10px;">
     <a href="/"><img src="images/Screenshot 2025-09-04 162733.png" alt="" style="height:50px; width:auto;"></a>
      <h2 style="margin:0; font-size:1.5rem;">MYSPACE</h2>
    </div>
     <nav>
      <ul style="list-style:none; display:flex; gap:1.2rem; margin:0; padding:0;">
        <li><a href="/" style="color:#fff; text-decoration:none;">Home</a></li>
        <li><a href="/about" style="color:#fff; text-decoration:none;">About</a></li>
        <li><a href="/dashboard" style="color:#fff; text-decoration:none;">Dashboard</a></li>
        <li><a href="/contact" style="color:#fff; text-decoration:none;">Contact</a></li>
         <li style="position:relative;">
  <a href="" style="color:#fff; text-decoration:none;">Account</a>
  <ul style="position:absolute; top:100%; left:0; background:#222; padding:0.5rem 1rem; margin:0; display:none; border-radius:6px;">
    <li style="margin:0.3rem 0;"><a href="/profile" style="color:#fff; text-decoration:none;">Profile</a></li>
    <li style="margin:0.3rem 0;"><a href="/register" style="color:#fff; text-decoration:none;">Register</a></li>
    <li style="margin:0.3rem 0;"><a href="/login" style="color:#fff; text-decoration:none;">Login</a></li>
     <li style="margin:0.3rem 0;"><a href="/ADMIN" style="color:red; text-decoration:none;">ADMIN</a></li>
  </ul>
</li>

<script>
  // Simple hover effect for dropdown
  const accountLink = document.querySelector('li[style*="position:relative;"]');
  const dropdown = accountLink.querySelector("ul");

  accountLink.addEventListener("mouseenter", () => {
    dropdown.style.display = "block";
  });

  accountLink.addEventListener("mouseleave", () => {
    dropdown.style.display = "none";
  });


  
</script>
  </header>
<header class="topbar">
  <!-- Categories Dropdown -->
  <div class="categories">
    <button class="cat-btn" id="catToggle">‚ò∞ Categories</button>
    
    <div class="cat-menu" id="catMenu">
      <ul class="main-cat">
        
        <!-- üßë‚Äçüåæ Farming -->
        <li class="cat-item">
          <a href="/category/farming" class="category-link">Farming & Agriculture</a>
          <ul class="sub-cat">
            <li><a href="/category/farming/seeds" class="category-link">Seeds & Seedlings</a></li>
            <li><a href="/category/farming/fertilizers" class="category-link">Fertilizers & Manure</a></li>
            <li><a href="/category/farming/pesticides" class="category-link">Pesticides & Herbicides</a></li>
            <li><a href="/category/farming/tools" class="category-link">Farm Tools & Equipment</a></li>
            <li><a href="/category/farming/irrigation" class="category-link">Irrigation Systems</a></li>
            <li><a href="/category/farming/greenhouses" class="category-link">Greenhouses & Nets</a></li>
            <li><a href="/category/farming/livestock" class="category-link">Livestock & Poultry</a>
              <ul class="nested">
                <li><a href="/category/farming/livestock/cows" class="category-link">Cows</a></li>
                <li><a href="/category/farming/livestock/goats" class="category-link">Goats</a></li>
                <li><a href="/category/farming/livestock/chickens" class="category-link">Chickens</a></li>
                <li><a href="/category/farming/livestock/rabbits" class="category-link">Rabbits</a></li>
                <li><a href="/category/farming/livestock/feeds" class="category-link">Animal Feeds</a></li>
                <li><a href="/category/farming/livestock/equipment" class="category-link">Milking Equipment</a></li>
              </ul>
            </li>
            <li><a href="/category/farming/produce" class="category-link">Farm Produce</a>
              <ul class="nested">
                <li><a href="/category/farming/produce/fruits" class="category-link">Fruits</a></li>
                <li><a href="/category/farming/produce/vegetables" class="category-link">Vegetables</a></li>
                <li><a href="/category/farming/produce/grains" class="category-link">Grains</a></li>
                <li><a href="/category/farming/produce/roots" class="category-link">Root Crops</a></li>
                <li><a href="/category/farming/produce/spices" class="category-link">Herbs & Spices</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <!-- üíª Electronics -->
        <li class="cat-item">
          <a href="/category/electronics" class="category-link">Electronics & Appliances</a>
          <ul class="sub-cat">
            <li><a href="/category/electronics/phones" class="category-link">Phones & Tablets</a></li>
            <li><a href="/category/electronics/computers" class="category-link">Computers & Laptops</a></li>
            <li><a href="/category/electronics/tvs" class="category-link">TVs & Home Theatres</a></li>
            <li><a href="/category/electronics/kitchen" class="category-link">Kitchen Appliances</a></li>
            <li><a href="/category/electronics/solar" class="category-link">Solar Panels & Batteries</a></li>
            <li><a href="/category/electronics/accessories" class="category-link">Accessories</a></li>
          </ul>
        </li>

        <!-- üöó Vehicles -->
        <li class="cat-item">
          <a href="/category/vehicles" class="category-link">Vehicles & Machinery</a>
          <ul class="sub-cat">
            <li><a href="/category/vehicles/cars" class="category-link">Cars</a></li>
            <li><a href="/category/vehicles/bikes" class="category-link">Motorcycles</a></li>
            <li><a href="/category/vehicles/trucks" class="category-link">Trucks</a></li>
            <li><a href="/category/vehicles/farm-machines" class="category-link">Tractors & Ploughs</a></li>
            <li><a href="/category/vehicles/spare-parts" class="category-link">Spare Parts & Accessories</a></li>
          </ul>
        </li>

        <!-- üëï Fashion -->
        <li class="cat-item">
          <a href="/category/fashion" class="category-link">Fashion & Beauty</a>
          <ul class="sub-cat">
            <li><a href="/category/fashion/men" class="category-link">Men‚Äôs Clothing</a></li>
            <li><a href="/category/fashion/women" class="category-link">Women‚Äôs Clothing</a></li>
            <li><a href="/category/fashion/shoes" class="category-link">Shoes</a></li>
            <li><a href="/category/fashion/watches" class="category-link">Watches & Jewelry</a></li>
            <li><a href="/category/fashion/cosmetics" class="category-link">Cosmetics & Skin Care</a></li>
          </ul>
        </li>

        <!-- üè† Home -->
        <li class="cat-item">
          <a href="/category/home" class="category-link">Home & Furniture</a>
          <ul class="sub-cat">
            <li><a href="/category/home/furniture" class="category-link">Furniture</a></li>
            <li><a href="/category/home/lighting" class="category-link">Lighting</a></li>
            <li><a href="/category/home/decor" class="category-link">Home Decor</a></li>
            <li><a href="/category/home/appliances" class="category-link">Home Appliances</a></li>
            <li><a href="/category/home/kitchen" class="category-link">Kitchenware</a></li>
            <li><a href="/category/home/cleaning" class="category-link">Cleaning & Maintenance</a></li>
          </ul>
        </li>

        <!-- üèòÔ∏è Real Estate -->
        <li class="cat-item">
          <a href="/category/real-estate" class="category-link">Real Estate</a>
          <ul class="sub-cat">
            <li><a href="/category/real-estate/houses" class="category-link">Houses for Sale</a></li>
            <li><a href="/category/real-estate/rentals" class="category-link">Houses for Rent</a></li>
            <li><a href="/category/real-estate/land" class="category-link">Land & Plots</a></li>
            <li><a href="/category/real-estate/commercial" class="category-link">Commercial Properties</a></li>
          </ul>
        </li>

        <!-- üß∞ Services -->
        <li class="cat-item">
          <a href="/category/services" class="category-link">Services</a>
          <ul class="sub-cat">
            <li><a href="/category/services/transport" class="category-link">Transport & Logistics</a></li>
            <li><a href="/category/services/farming" class="category-link">Farm Labour & Consultancy</a></li>
            <li><a href="/category/services/repairs" class="category-link">Repairs & Maintenance</a></li>
            <li><a href="/category/services/cleaning" class="category-link">Cleaning Services</a></li>
            <li><a href="/category/services/it" class="category-link">IT & Digital Services</a></li>
            <li><a href="/category/services/education" class="category-link">Education & Training</a></li>
          </ul>
        </li>

        <!-- üßÉ Others -->
        <li class="cat-item">
          <a href="/category/others" class="category-link">Other Categories</a>
          <ul class="sub-cat">
            <li><a href="/category/others/books" class="category-link">Books & Stationery</a></li>
            <li><a href="/category/others/pets" class="category-link">Pets & Animals</a></li>
            <li><a href="/category/others/art" class="category-link">Art & Crafts</a></li>
            <li><a href="/category/others/antiques" class="category-link">Antiques & Collectibles</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>




  <!-- Search Bar -->
   
  
  <!-- Search Bar -->
<div class="searchbar-container">
  <input 
    type="text" 
    id="productSearch" 
    placeholder="Search for products or shops...">
 </div>

 <button type="button" id="searchBtn" class="searchbutton">SEARCH üîç</button>
 <button id="filterToggle" class="filter-toggle-btn">üß© Filters</button>

</header>


<!-- === FILTER BAR === -->
<div 
  id="filterBar" 
  style="
    position: fixed; 
    top: 80px; 
    left: 50%; 
    transform: translateX(-50%);
    width: 60%; 
    max-width: 700px; 
    background: rgba(11, 18, 32, 0.9); /* translucent background */
    border: 1px solid #1f2937;
    border-radius: 12px;
    padding: 20px 30px;
    color: white;
    display: none; /* hidden by default */
    flex-direction: column;
    gap: 1.2rem;
    z-index: 2000; 
    backdrop-filter: blur(10px); /* frosted glass effect */
    overflow-y: auto;
    max-height: 80vh;
  "
>
  <!-- Close Button -->
  <button 
    id="closeFilterBtn" 
    style="
      position: absolute;
      top: 12px;
      right: 15px;
      background: #ff9900;
      border: none;
      color: white;
      font-weight: bold;
      font-size: 1rem;
      border-radius: 6px;
      padding: 4px 10px;
      cursor: pointer;
      transition: background 0.3s ease;
    "
    onmouseover="this.style.background='#e68a00'"
    onmouseout="this.style.background='#ff9900'"
  >
    ‚úñ
  </button>

  <h3 style="margin-top: 0; font-size: 1.3rem;">üîç Filter Products</h3>

  <form id="filterForm" style="display: flex; flex-direction: column; gap: 1rem;">
    
    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="minPrice">Min Price</label>
      <input type="number" id="minPrice" name="minPrice" placeholder="0"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
    </div>

    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="maxPrice">Max Price</label>
      <input type="number" id="maxPrice" name="maxPrice" placeholder="100000"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
    </div>

    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="location">Location</label>
      <input type="text" id="location" name="location" placeholder="e.g. Nairobi"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
    </div>

    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="type">Type</label>
      <select id="type" name="type"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
        <option value="">Any</option>
        <option value="new">New</option>
        <option value="used">Used</option>
        <option value="refurbished">Refurbished</option>
      </select>
    </div>

    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="color">Color</label>
      <input type="text" id="color" name="color" placeholder="e.g. Black"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
    </div>

    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="brand">Brand</label>
      <input type="text" id="brand" name="brand" placeholder="e.g. Samsung"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
    </div>

    <div class="filter-group" style="display: flex; flex-direction: column; gap: 6px;">
      <label for="features">Features</label>
      <input type="text" id="features" name="features" placeholder="e.g. Solar-powered"
        style="background:#111827; color:white; border:1px solid #374151; border-radius:6px; padding:8px;">
    </div>

    <button 
      type="button" 
      id="applyFilters" 
      style="
        background: #e68a00; 
        border: none; 
        color: white; 
        padding: 10px 0; 
        border-radius: 8px; 
        cursor: pointer; 
        font-weight: 600; 
        transition: background 0.3s ease;
      "
      onmouseover="this.style.background='#ff9900'"
      onmouseout="this.style.background='#e68a00'"
    >
      Apply Filters
    </button>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  // === FILTER BAR FUNCTIONALITY WITH DEBUG LOGS ===
  const filterToggle = document.getElementById("filterToggle");
  const filterBar = document.getElementById("filterBar");
  const closeFilterBtn = document.getElementById("closeFilterBtn");
  const applyFilters = document.getElementById("applyFilters");

  // Toggle filter bar visibility
  filterToggle.addEventListener("click", () => {
    console.log("üü¢ Filter toggle clicked");
    filterBar.style.display = filterBar.style.display === "flex" ? "none" : "flex";
  });

  // Close filter bar
  closeFilterBtn.addEventListener("click", () => {
    console.log("üî¥ Filter close clicked");
    filterBar.style.display = "none";
  });

  // Apply filters
  applyFilters.addEventListener("click", () => {
    console.log("‚öôÔ∏è Applying filters...");

    // Get filter values
    const minPrice = parseFloat(document.getElementById("minPrice").value);
    const maxPrice = parseFloat(document.getElementById("maxPrice").value);
    const location = document.getElementById("location").value.trim().toLowerCase();
    const type = document.getElementById("type").value.trim().toLowerCase();
    const color = document.getElementById("color").value.trim().toLowerCase();
    const brand = document.getElementById("brand").value.trim().toLowerCase();
    const features = document.getElementById("features").value.trim().toLowerCase();

    console.log({
      minPrice,
      maxPrice,
      location,
      type,
      color,
      brand,
      features
    });

    const products = document.querySelectorAll(".product");
    console.log(`üõçÔ∏è Found ${products.length} products total`);

    let count = 0;

    products.forEach((product, i) => {
      const price = parseFloat(product.dataset.price);
      const loc = product.dataset.location?.toLowerCase() || "";
      const typ = product.dataset.type?.toLowerCase() || "";
      const col = product.dataset.color?.toLowerCase() || "";
      const brd = product.dataset.brand?.toLowerCase() || "";
      const feat = product.dataset.features?.toLowerCase() || "";

      console.log(`\nüëâ Checking product #${i + 1}:`, {
        price,
        loc,
        typ,
        col,
        brd,
        feat
      });

      // Check if each filter (if provided) matches
      const matchPrice =
        (!minPrice || price >= minPrice) &&
        (!maxPrice || price <= maxPrice);
      const matchLocation = !location || loc.includes(location);
      const matchType = !type || typ.includes(type);
      const matchColor = !color || col.includes(color);
      const matchBrand = !brand || brd.includes(brand);
      const matchFeatures = !features || feat.includes(features);

      const matches =
        matchPrice &&
        matchLocation &&
        matchType &&
        matchColor &&
        matchBrand &&
        matchFeatures;

      console.log(`‚úÖ Matches? ${matches}`);

      product.style.display = matches ? "block" : "none";
      if (matches) count++;
    });

    console.log(`üéØ Filtered ${count} matching products`);
    if (count === 0) {
      console.warn("‚ö†Ô∏è No matching products found!");
    }

    filterBar.style.display = "none"; // hide after applying
  });
  });
</script>





 <!-- Flash Toast -->
  <% if (success_msg) { %>
    <div id="toast" 
         style="position:fixed; top:20px; right:20px; background:#4caf50; color:#fff;
                padding:15px 20px; border-radius:8px; font-size:1rem; 
                box-shadow:0 4px 8px rgba(0,0,0,0.2); z-index:9999;
                opacity:1; transition:opacity 0.5s ease;">
      <%= success_msg %>
    </div>
  <% } %>

  <% if (error_msg && error_msg.length > 0) { %>
  <div id="toast" 
       style="position:fixed; top:20px; right:20px; background:#e74c3c; color:#fff;
              padding:15px 20px; border-radius:8px; font-size:1rem; 
              box-shadow:0 4px 8px rgba(0,0,0,0.2); z-index:9999;
              opacity:1; transition:opacity 0.5s ease;">
    <%= Array.isArray(error_msg) ? error_msg[0] : error_msg %>
  </div>
<% } %>


   <!-- RIGHT: MAIN DASHBOARD CONTENT -->
<main class="dashboard-content">
  <h2>Discover Businesses</h2>
  <p class="subtext">Scroll through our marketplace and connect with local shops & entrepreneurs.</p>

  <div class="product-grid">
    <div class="cards" id="productContainer">

      <% if (products && products.length > 0) { %>

        <% products.forEach((prod, i) => { %>

          <div class="card product-card" data-index="<%= i %>" data-product-id="<%= prod._id %>">
            <img src="<%= prod.url %>" alt="<%= prod.name %>">

            <div class="card-content">
              <h3 class="prod-name"><%= prod.name %></h3>
              <p class="prod-price"><strong>Price:</strong> <strong><%= prod.price %></strong></p>
              <p class="prod-desc"><%= prod.description || "No description provided" %></p>
              <p class="prod-loc">‚öíÔ∏è <%= prod.category || "Category not set" %></p>
              <p class="prod-loc">üìç <%= prod.location || "Location not set" %></p>
            
        </div>
.
          <!-- üî• ACTION ICON BAR -->
          <div class="action-bar">
            <span class="action-icon bookmark-btn" title="Bookmark" data-id="<%= prod._id %>">üîñ</span>
            <span class="action-icon message-btn" title="Message Seller" data-id="<%= prod._id %>">üí¨</span>
            <span class="action-icon cart-btn" title="Add to Cart" data-id="<%= prod._id %>">üõí</span>
          </div>

        </div>
      <% }) %>
    <% } else { %>
      <p class="empty-message">No products uploaded yet. Be the first to join!</p>
    <% } %>
  </div>
</div>

</main>

  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // Helper: send AJAX request
  async function sendAction(url, successMessage) {
    try {
      const res = await fetch(url, { method: "POST" });

      if (res.ok) {
        showToast(successMessage);
      } else {
        showToast("Something went wrong.", true);
      }
    } catch (err) {
      console.error(err);
      showToast("Server error.", true);
    }
  }

  // Toast popup
  function showToast(msg, isError = false) {
    let toast = document.createElement("div");
    toast.className = "toast " + (isError ? "error" : "success");
    toast.innerText = msg;
    document.body.appendChild(toast);

    setTimeout(() => {
      toast.classList.add("show");
    }, 10);

    setTimeout(() => {
      toast.classList.remove("show");
      setTimeout(() => toast.remove(), 500);
    }, 2500);
  }

  // ACTION: Bookmark
  document.querySelectorAll(".bookmark-btn").forEach(btn => {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();  // üö´ Prevent card click
      let id = btn.getAttribute("data-id");
      sendAction(`/profile/bookmarks/add/${id}`, "Bookmarked!");
    });
  });

  // ACTION: Message
  document.querySelectorAll(".message-btn").forEach(btn => {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();  // üö´ Prevent card click
      let id = btn.getAttribute("data-id");
      sendAction(`/profile/messages/start/${id}`, "Message started!");
    });
  });

  // ACTION: Cart
  document.querySelectorAll(".cart-btn").forEach(btn => {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();  // üö´ Prevent card click
      let id = btn.getAttribute("data-id");
      sendAction(`/profile/cart/add/${id}`, "Added to cart!");
    });
  });

});
</script>



<script>
document.getElementById("applyFilters").addEventListener("click", async () => {
  const filters = {
    minPrice: document.getElementById("minPrice").value,
    maxPrice: document.getElementById("maxPrice").value,
    location: document.getElementById("location").value.trim(),
    type: document.getElementById("type").value,
    color: document.getElementById("color").value.trim(),
    brand: document.getElementById("brand").value.trim(),
    features: document.getElementById("features").value.trim(),
  };

  const query = new URLSearchParams(filters).toString();
  const container = document.getElementById("productContainer");

  container.innerHTML = "<p style='color:white;'>Filtering results...</p>";

  try {
    const res = await fetch(`/filter?${query}`);
    const data = await res.json();

    if (!Array.isArray(data) || data.length === 0) {
      container.innerHTML = "<p style='color:white;'>No products match your filters.</p>";
      return;
    }

    container.innerHTML = data.map(prod => `
      <div class="card product-card">
        <img src="${prod.url}" alt="${prod.name}">
        <div class="card-content">
          <h3 class="prod-name">${prod.name}</h3>
          <p class="prod-price"><strong>Price:</strong> Ksh ${prod.price}</p>
          <p class="prod-desc">${prod.description || "No description provided"}</p>
          <p class="prod-loc">üìç ${prod.location || "Location not set"}</p>
        </div>
      </div>
    `).join("");

  } catch (err) {
    console.error("Filter failed:", err);
    container.innerHTML = "<p style='color:red;'>Error applying filters.</p>";
  }
});

</script>
<!-- Product Modal -->


<div class="modal-overlay" id="productModal">
  <div class="modal-content">
    <button class="close-btn" id="closeModal">&times;</button>
<div class="hero-wrapper">
  <!-- Hero product slot -->
  <div id="modalHero" class="hero-card">
    <!-- Will be filled dynamically -->
  </div>

  <!-- Image preview section -->
  <div class="hero-preview">
    <img id="heroImagePreview" src= >

  
 
             

    <!-- Contact Info -->
    <div class="contact-info" id="contactInfo">
    
    </div>

    <!-- Related Products -->
    <div id="modalOthers" class="modal-grid">
 
    </div>
  </div>
</div>




















 




</section>


  <footer>
    <p>&copy; <%= new Date().getFullYear() %> MySpace | All Rights Reserved</p>
  </footer>
  
<script>
  console.log("üìå Script Loaded: Modal + Product click logic starting...");

  const productContainer = document.getElementById("productContainer");
  const modal = document.getElementById("productModal");
  const modalHero = document.getElementById("modalHero");
  const modalOthers = document.getElementById("modalOthers");
  const closeModal = document.getElementById("closeModal");
  const contactInfo = document.getElementById("contactInfo");

  // üî• Track active hero
  let currentActiveCard = null;

  function loadModalForCard(card) {
    // Clear previous modal content
    modalHero.innerHTML = "";
    modalOthers.innerHTML = "";
    contactInfo.innerHTML = "";
    console.log("üßπ Modal content cleared");

    // üî• Move clicked card into hero (NOT clone)
    currentActiveCard = card;
    modalHero.appendChild(card);
    card.classList.add("hero-card");
    console.log("‚ú® Hero card MOVED and appended");

    // Fetch contact info
    const index = card.dataset.index;
    console.log("üìå Product index:", index);

    fetch(`/dashboard/contact/${index}`)
      .then(res => res.json())
      .then(data => {
        contactInfo.innerHTML = `
          <div class="contact-card">
            <h3>${data.contactName || "Not provided"}</h3>
            <p><strong>Phone:</strong> ${data.contactPhone || "Not provided"}</p>
            <p><strong>Email:</strong> ${data.contactEmail || "Not provided"}</p>
          </div>
        `;
      })
      .catch(err => {
        console.error("‚ùå Contact fetch error:", err);
        contactInfo.innerHTML = `<p style="color:red;">Failed to load contact info.</p>`;
      });

    // Category filtering
    const categoryElement = card.querySelector(".prod-loc");
    const selectedCategory = categoryElement
      ? categoryElement.textContent.replace("‚öíÔ∏è", "").trim().toLowerCase()
      : "";

    console.log("üìÇ Selected category:", selectedCategory);

    const allCards = Array.from(document.querySelectorAll(".product-card"));

    // üî• Get all cards except the active hero
    const sameCategoryCards = allCards.filter((c) => {
      const catEl = c.querySelector(".prod-loc");
      const catText = catEl
        ? catEl.textContent.replace("‚öíÔ∏è", "").trim().toLowerCase()
        : "";
      return c !== card && catText === selectedCategory;
    });

    console.log("üì¶ Same-category matches:", sameCategoryCards.length);

    if (sameCategoryCards.length > 0) {
      sameCategoryCards.forEach((c) => {
        modalOthers.appendChild(c); // üî• MOVE card instead of cloning
        c.classList.add("modal-other-card");
      });
    } else {
      modalOthers.innerHTML = `<p style="color:#ccc; text-align:center;">No other products in this category.</p>`;
    }

    modal.style.display = "flex";
    document.body.style.overflow = "hidden";
  }

  // ‚ö†Ô∏è Check elements
  if (!productContainer) console.error("‚ùå productContainer NOT FOUND");
  if (!modal) console.error("‚ùå modal NOT FOUND");
  if (!modalHero) console.error("‚ùå modalHero NOT FOUND");
  if (!modalOthers) console.error("‚ùå modalOthers NOT FOUND");
  if (!contactInfo) console.error("‚ùå contactInfo NOT FOUND");
  if (!closeModal) console.error("‚ùå closeModal NOT FOUND");

  // üî• Click handler for product cards (main grid)
  productContainer.addEventListener("click", (e) => {
    const card = e.target.closest(".product-card");
    if (!card) return;
    loadModalForCard(card);
  });

  // üîÅ Swap logic when clicking card inside modal (others section)
  modalOthers.addEventListener("click", (e) => {
    const card = e.target.closest(".product-card");
    if (!card) return;

    console.log("üîÅ Swapping cards...");

    const previousHero = currentActiveCard;

    // Move clicked card to hero
    modalHero.innerHTML = "";
  const clone = card.cloneNode(true);
clone.classList.add("hero-card");
clone.classList.remove("product-card");

modalHero.innerHTML = "";
modalHero.appendChild(clone);

    // Move old hero to others
    modalOthers.appendChild(previousHero);

    currentActiveCard = card;
  });

  // ‚ùå Close modal
  closeModal.addEventListener("click", () => {
    console.log("‚ùå Close button clicked, closing modal");
    modal.style.display = "none";
    document.body.style.overflow = "auto";
  });

  // üï≥Ô∏è Click outside modal
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      console.log("‚ùå Clicked modal background, closing modal");
      modal.style.display = "none";
      document.body.style.overflow = "auto";
    }
  });
</script>



<script>
document.addEventListener("DOMContentLoaded", () => {
  console.log("‚úÖ DOM fully loaded");

  /* ------------------- üîç FILTER TOGGLE ------------------- */
  const filterToggle = document.getElementById("filterToggle");
  const filterBar = document.getElementById("filterBar");
  if (filterToggle && filterBar) {
    filterToggle.addEventListener("click", () => {
      filterBar.classList.toggle("active");
      console.log(filterBar.classList.contains("active") ? "‚úÖ Filter bar visible" : "üö´ Hidden");
    });
  }

  /* ------------------- üîî TOAST FADE ------------------- */
  const toast = document.getElementById("toast");
  if (toast) {
    setTimeout(() => {
      toast.style.opacity = "0";
      setTimeout(() => toast.remove(), 500);
    }, 5000);
  }

  /* ------------------- üñºÔ∏è IMAGE MODAL VIEWER ------------------- */
  document.querySelectorAll('.biz-gallery img').forEach(img => {
    img.addEventListener('click', () => {
      const modal = document.createElement('div');
      Object.assign(modal.style, {
        position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',
        background: 'rgba(0,0,0,0.8)', display: 'flex',
        alignItems: 'center', justifyContent: 'center', zIndex: 9999
      });
      modal.innerHTML = `<img src="${img.src}" style="max-width:90%; max-height:90%; border-radius:10px;">`;
      modal.addEventListener('click', () => modal.remove());
      document.body.appendChild(modal);
    });
  });

  /* ------------------- üìÇ CATEGORY DROPDOWN ------------------- */
  const categories = document.querySelector(".categories");
  if (categories) {
    let hideTimeout;
    categories.addEventListener("mouseenter", () => {
      clearTimeout(hideTimeout);
      categories.classList.add("show");
    });
    categories.addEventListener("mouseleave", () => {
      hideTimeout = setTimeout(() => categories.classList.remove("show"), 500);
    });

    document.querySelectorAll(".cat-item").forEach(item => {
      const subMenu = item.querySelector(".sub-cat");
      if (subMenu) {
        let subTimeout;
        item.addEventListener("mouseenter", () => {
          clearTimeout(subTimeout);
          subMenu.style.display = "block";
          requestAnimationFrame(() => {
            subMenu.style.opacity = "1";
            subMenu.style.transform = "translateX(0)";
          });
        });
        item.addEventListener("mouseleave", () => {
          subTimeout = setTimeout(() => {
            subMenu.style.opacity = "0";
            subMenu.style.transform = "translateX(-10px)";
            setTimeout(() => (subMenu.style.display = "none"), 250);
          }, 300);
        });
      }
    });
  }

  /* ------------------- üß≠ PRODUCT SEARCH ------------------- */
  const searchBtn = document.getElementById("searchBtn");
  const searchInput = document.getElementById("productSearch") || document.getElementById("searchInput");
  const productContainer = document.getElementById("productContainer") || document.getElementById("searchResults");

  async function renderProducts(products) {
    if (!productContainer) return;
    productContainer.innerHTML = "";

    if (!products || products.length === 0) {
      productContainer.innerHTML = "<p style='color:white;'>No products found.</p>";
      return;
    }

    productContainer.innerHTML = products.map(prod => `
      <div class="card product-card">
        <img src="${prod.url}" alt="${prod.name}">
        <div class="card-content">
          <h3 class="prod-name">${prod.name}</h3>
          <p class="prod-price"><strong>Price:</strong> Ksh ${prod.price}</p>
          <p class="prod-desc">${prod.description || "No description provided"}</p>
          <p class="prod-loc">üìç ${prod.location || "Location not set"}</p>
          <p class="prod-seller">üë§ Seller: ${prod.seller}</p>
        </div>
      </div>
    `).join("");
  }

  async function handleSearch(query) {
    if (!query) {
      productContainer.innerHTML = "<p>Please enter a search term.</p>";
      return;
    }

    productContainer.innerHTML = "<p style='color:white;'>Searching...</p>";
    try {
      const res = await fetch(`/search?q=${encodeURIComponent(query)}`);
      const data = await res.json();
      await renderProducts(data);
    } catch (err) {
      console.error("‚ùå Search failed:", err);
      productContainer.innerHTML = "<p style='color:red;'>Something went wrong. Try again later.</p>";
    }
  }

  searchBtn?.addEventListener("click", () => handleSearch(searchInput.value.trim()));

  /* ------------------- üè∑Ô∏è CATEGORY CLICK HANDLER ------------------- */
  document.querySelectorAll(".category-link").forEach(link => {
    link.addEventListener("click", async (event) => {
      event.preventDefault();
      const href = link.getAttribute("href");
      if (!productContainer) return;
      productContainer.innerHTML = `<p style="color:white;">Loading category...</p>`;

      try {
        const res = await fetch(href, { headers: { "Accept": "application/json" } });
        if (!res.ok) throw new Error("HTTP " + res.status);
        const products = await res.json();
        await renderProducts(products);
        window.history.pushState({}, "", href);
      } catch (err) {
        console.error("üî• Category fetch error:", err);
        productContainer.innerHTML = `<p style="color:red;">Failed to load category.</p>`;
      }
    });
  });
});
</script>


</body>
</html>
